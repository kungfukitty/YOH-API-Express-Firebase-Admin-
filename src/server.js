import 'dotenv/config';import express from 'express';import cors from 'cors';import cookieParser from 'cookie-parser';import rateLimit from 'express-rate-limit';import authRoutes from './routes/authRoutes.js';import publicRoutes from './routes/publicRoutes.js';import userRoutes from './routes/userRoutes.js';import adminRoutes from './routes/adminRoutes.js';const app=express();const ORIGINS=(process.env.CORS_ORIGINS||'').split(',').map(s=>s.trim()).filter(Boolean);app.use(cors({origin:(o,cb)=>cb(null,!o||ORIGINS.includes(o)),credentials:true}));app.use(express.json());app.use(cookieParser());app.use(rateLimit({windowMs:60*1000,max:60}));app.get('/api/health',(req,res)=>res.json({ok:true,time:new Date().toISOString()}));app.use('/api',publicRoutes);app.use('/api/auth',authRoutes);app.use('/api',userRoutes);app.use('/api/admin',adminRoutes);const PORT=process.env.PORT||3000;app.listen(PORT,()=>console.log('API listening on',PORT));