import admin from 'firebase-admin';let init=false;export function getAdmin(){if(init) return admin;const json=process.env.FIREBASE_SERVICE_ACCOUNT_JSON;if(json){const creds=JSON.parse(json);admin.initializeApp({credential:admin.credential.cert(creds)})}else{const {FIREBASE_PROJECT_ID,FIREBASE_CLIENT_EMAIL,FIREBASE_PRIVATE_KEY}=process.env;admin.initializeApp({credential:admin.credential.cert({projectId:FIREBASE_PROJECT_ID,clientEmail:FIREBASE_CLIENT_EMAIL,privateKey:(FIREBASE_PRIVATE_KEY||'').replace(/\\n/g,'\n')})})}init=true;return admin}